<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Ryan Tolboom">
    <meta name="description" content="Ryan Tolboom&#39;s website">
    <meta name="keywords" content="edtech,professor,blog,developer">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="The Good, the Bad, and the Elmy"/>
<meta name="twitter:description" content="I decided to begin developing a web app to keep track of groups in some of my classes. Ultimately I’d like to be able to automate project milestone check-ins for these groups (is your git repo up, can I clone it and run docker-compose, etc.) but the first part of that is just getting the groups and members in a database. Looking through the long list of things I would like to play with, I decided on developing the front end in Elm with Bulma for the styling."/>

    <meta property="og:title" content="The Good, the Bad, and the Elmy" />
<meta property="og:description" content="I decided to begin developing a web app to keep track of groups in some of my classes. Ultimately I’d like to be able to automate project milestone check-ins for these groups (is your git repo up, can I clone it and run docker-compose, etc.) but the first part of that is just getting the groups and members in a database. Looking through the long list of things I would like to play with, I decided on developing the front end in Elm with Bulma for the styling." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://using.tech/posts/elm/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-29T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-11-29T00:00:00+00:00" />


    
      <base href="https://using.tech/posts/elm/">
    
    <title>
  The Good, the Bad, and the Elmy · Ryan Tolboom
</title>

    
      <link rel="canonical" href="https://using.tech/posts/elm/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://using.tech/css/coder.min.28d751104f30c16da1aa1bb04015cbe662cacfe0d1b01af4f2240ad58580069c.css" integrity="sha256-KNdREE8wwW2hqhuwQBXL5mLKz&#43;DRsBr08iQK1YWABpw=" crossorigin="anonymous" media="screen" />
    

    

    

    
      <link rel="stylesheet" href="https://using.tech/css/custom.css" />
    

    
    
    <link rel="icon" type="image/png" href="https://using.tech/img/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://using.tech/img/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.111.2">
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://using.tech">
      Ryan Tolboom
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://using.tech/about/">About</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://using.tech/posts/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://using.tech/consulting/">Consulting</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://github.com/rxt1077/resume">Resume</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">The Good, the Bad, and the Elmy</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2020-11-29T00:00:00Z'>
                November 29, 2020
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              12 minutes read
            </span>
          </div>
          
          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="https://using.tech/tags/elm/">elm</a>
      <span class="separator">•</span>
    <a href="https://using.tech/tags/functional-programming/">functional programming</a>
      <span class="separator">•</span>
    <a href="https://using.tech/tags/javascript/">javascript</a>
      <span class="separator">•</span>
    <a href="https://using.tech/tags/front-end/">front end</a></div>

        </div>
      </header>

      <div>
        <div class="imageblock">
<div class="content">
<img src="https://using.tech/elm/code.png" alt="code" width="60%"/>
</div>
</div>
<div class="paragraph">
<p>I decided to begin developing a web app to keep track of groups in some of my
classes. Ultimately I’d like to be able to automate project milestone check-ins
for these groups (is your git repo up, can I clone it and run docker-compose,
etc.) but the first part of that is just getting the groups and members in a
database. Looking through the long list of things I would like to play with,
I decided on developing the front end in <a href="https://elm-lang.org/">Elm</a> with
<a href="https://bulma.io/">Bulma</a> for the styling. I’ll discuss back end development in
upcoming posts, but in this post I really wanted to comment on my first
experiences with Elm. <a href="https://github.com/rxt1077/rob-front-end">You can find
the full source here.</a></p>
</div>
<div class="paragraph">
<p>There is plenty of <a href="https://guide.elm-lang.org/">good beginner documentation on
Elm</a> and I encourage you to read it (even if you don’t heed my advise,
eventually the compiler itself will recommend you read it). This post isn’t
meant to cover beginner topics so much as try to capture a developer experience.</p>
</div>
<div class="sect1">
<h2 id="_the_good"><a class="anchor" href="#_the_good"></a><a class="link" href="#_the_good">The Good</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Elm is a functional language (don’t forget what the first three letters in
functional programming are) that uses a message passing model to handle
updates. Having thoroughly enjoyed working in Erlang and Clojure in the past
these features put Elm on my shortlist of things to try. To make things even
better Elm is strongly typed (more on that later) and has modern compiler
warnings that actually help you figure out what’s going on. I cut my teeth in
the age of <code>SYNTAX ERROR</code> so I think I’ve had enough terse compiler messages to
last me a lifetime.</p>
</div>
<div class="paragraph">
<p>Elm focuses on defining the data and how things interact with it. The Elm
architecture expresses this as the <em>Model</em> (should be familiar to web devs) and
it really amounts to some custom types and an <code>init</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="elm"><span class="c1">-- MODEL</span>


<span class="k">type</span> <span class="k">alias</span> <span class="kt">Group</span> <span class="o">=</span>
  <span class="p">{</span> <span class="n">id</span> <span class="p">:</span> <span class="kt">Int</span>
  <span class="o">,</span> <span class="n">name</span> <span class="p">:</span> <span class="kt">String</span>
  <span class="o">,</span> <span class="n">gitUrl</span> <span class="p">:</span> <span class="kt">String</span>
  <span class="o">,</span> <span class="n">members</span> <span class="p">:</span> <span class="kt">List</span> <span class="kt">String</span>
  <span class="p">}</span>

<span class="k">type</span> <span class="k">alias</span> <span class="kt">User</span> <span class="o">=</span>
  <span class="p">{</span> <span class="n">ucid</span> <span class="p">:</span> <span class="kt">String</span>
  <span class="o">,</span> <span class="n">google_name</span> <span class="p">:</span> <span class="kt">String</span>
  <span class="p">}</span>

<span class="c1">-- Custom type so that modal is either active with data or inactive</span>
<span class="k">type</span> <span class="kt">EditModal</span>
  <span class="o">=</span> <span class="kt">Active</span>
  <span class="p">{</span> <span class="n">group</span> <span class="p">:</span> <span class="kt">Group</span>
  <span class="o">,</span> <span class="n">searchText</span> <span class="p">:</span> <span class="kt">String</span>
  <span class="o">,</span> <span class="n">buttonText</span> <span class="p">:</span> <span class="kt">String</span>
  <span class="o">,</span> <span class="n">title</span> <span class="p">:</span> <span class="kt">String</span>
  <span class="o">,</span> <span class="n">onClick</span> <span class="p">:</span> <span class="kt">Group</span> <span class="o">-&gt;</span> <span class="kt">Msg</span>
  <span class="p">}</span>
  <span class="o">|</span> <span class="kt">Inactive</span>

<span class="k">type</span> <span class="k">alias</span> <span class="kt">Model</span> <span class="o">=</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="p">{</span> <span class="n">groups</span> <span class="p">:</span> <span class="kt">List</span> <span class="kt">Group</span>
  <span class="o">,</span> <span class="n">users</span> <span class="p">:</span> <span class="kt">List</span> <span class="kt">User</span>
  <span class="o">,</span> <span class="n">editModal</span> <span class="p">:</span> <span class="kt">EditModal</span>
  <span class="o">,</span> <span class="n">notification</span> <span class="p">:</span> <span class="kt">String</span>
  <span class="p">}</span>

<span class="n">init</span> <span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="kt">Model</span><span class="o">,</span> <span class="kt">Cmd</span> <span class="kt">Msg</span><span class="p">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">init</span> <span class="n">_</span> <span class="o">=</span>
  <span class="p">({</span> <span class="n">groups</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="o">,</span> <span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="o">,</span> <span class="n">editModal</span> <span class="o">=</span> <span class="kt">Inactive</span>
  <span class="o">,</span> <span class="n">notification</span> <span class="o">=</span> <span class="s">&#34;</span><span class="s2">&#34;</span>
  <span class="p">}</span><span class="o">,</span> <span class="n">batch</span> <span class="p">[</span><span class="n">getUsers</span><span class="o">,</span> <span class="n">getGroups</span><span class="p">])</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is the heart of it. <code>groups</code>, <code>users</code>, <code>editModal</code>, and <code>notification</code>
are all the state that this web app has.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>init</code> function is a function just like any other, it gets things ready
at the start.</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>An update function handles incoming messages. It’s kind of like Grand Central
Station with trains coming in and out and some tasks being performed on new
arrivals. By far the coolest thing about it is that you <em>must</em> define your
messages as well as the data they carry with them. Just by glancing at an app’s
<code>Msg</code> declaration you can get a good feel for what that app is doing. Here’s
mine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="elm"><span class="k">type</span> <span class="kt">Msg</span>
  <span class="o">=</span> <span class="kt">GotGroups</span> <span class="p">(</span><span class="kt">Result</span> <span class="kt">Http</span><span class="o">.</span><span class="kt">Error</span> <span class="p">(</span><span class="kt">List</span> <span class="kt">Group</span><span class="p">))</span>
  <span class="o">|</span> <span class="kt">GotUsers</span> <span class="p">(</span><span class="kt">Result</span> <span class="kt">Http</span><span class="o">.</span><span class="kt">Error</span> <span class="p">(</span><span class="kt">List</span> <span class="kt">User</span><span class="p">))</span>
  <span class="o">|</span> <span class="kt">AddGroupButton</span>
  <span class="o">|</span> <span class="kt">EditGroupButton</span> <span class="kt">Group</span>
  <span class="o">|</span> <span class="kt">DeleteGroupButton</span> <span class="kt">Int</span>
  <span class="o">|</span> <span class="kt">CancelEditButton</span>
  <span class="o">|</span> <span class="kt">CreateGroup</span> <span class="kt">Group</span>
  <span class="o">|</span> <span class="kt">UpdateGroup</span> <span class="kt">Group</span>
  <span class="o">|</span> <span class="kt">ReloadGroups</span> <span class="p">(</span><span class="kt">Result</span> <span class="kt">Http</span><span class="o">.</span><span class="kt">Error</span> <span class="p">())</span>
  <span class="o">|</span> <span class="kt">AddMember</span> <span class="kt">String</span>
  <span class="o">|</span> <span class="kt">SearchInput</span> <span class="kt">String</span>
  <span class="o">|</span> <span class="kt">NameInput</span> <span class="kt">String</span>
  <span class="o">|</span> <span class="kt">GitInput</span> <span class="kt">String</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see what buttons can be pressed (<code>Add</code>, <code>Edit</code>, <code>Delete</code>, <code>Cancel</code>),
what data will be sent to the back end API (<code>CreateGroup</code>, <code>UpdateGroup</code>), and
you can see the <code>Msg</code> used to handle the responses (<code>GotGroups</code> and
<code>Got Users</code>). In Elm it’s typical to update the model every time a text input
is changed, so you will also see <code>SearchInput</code>, <code>NameInput</code>, and <code>GitInput</code>.
That really comes in handy later when I decided to implement something a little
more atypical. It should be noted that I’m not showing the actual update
function, because at this point I just want to try to give the feeling of the
approach that Elm takes.</p>
</div>
<div class="paragraph">
<p>The last part of the basic Elm architecture (which interestingly was
established organically <em>after</em> the language itself was created) is the <em>View</em>.
Once again, this should be familiar to web devs as the HTML that you’re actual
spitting out for a user to <em>view</em>. Elm has an
<a href="https://package.elm-lang.org/packages/elm/html/latest/">HTML package</a> (similar to
<a href="https://github.com/weavejester/hiccup">Hiccup</a> if you’ve worked in ClojureScript)
that makes generating HTML easy. You’re going to lean heavily on functions and
Lists (as you would in any FP) to create you’re HTML. Here’s a snippet that
creates a table of Groups:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="elm"><span class="n">rowControls</span> <span class="p">:</span> <span class="kt">Group</span> <span class="o">-&gt;</span> <span class="kt">Html</span> <span class="kt">Msg</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">rowControls</span> <span class="n">group</span> <span class="o">=</span>
  <span class="n">div</span> <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">field&#34;</span><span class="o">,</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">is-grouped&#34;</span> <span class="p">]</span>
    <span class="p">[</span> <span class="n">p</span> <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">control&#34;</span> <span class="p">]</span>
      <span class="p">[</span> <span class="n">a</span> <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">button&#34;</span><span class="o">,</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">is-link&#34;</span><span class="o">,</span> <span class="n">onClick</span> <span class="p">(</span><span class="kt">EditGroupButton</span> <span class="n">group</span><span class="p">)</span> <span class="p">]</span>
        <span class="p">[</span> <span class="n">text</span> <span class="s">&#34;</span><span class="s2">Edit&#34;</span> <span class="p">]</span>
      <span class="p">]</span>
    <span class="o">,</span> <span class="n">p</span> <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">control&#34;</span> <span class="p">]</span>
      <span class="p">[</span> <span class="n">a</span> <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">button&#34;</span><span class="o">,</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">is-danger&#34;</span><span class="o">,</span> <span class="n">onClick</span> <span class="p">(</span><span class="kt">DeleteGroupButton</span> <span class="n">group</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="p">]</span>
        <span class="p">[</span> <span class="n">text</span> <span class="s">&#34;</span><span class="s2">Delete&#34;</span> <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>

<span class="n">rowItem</span> <span class="p">:</span> <span class="kt">Group</span> <span class="o">-&gt;</span> <span class="kt">Html</span> <span class="kt">Msg</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">rowItem</span> <span class="n">group</span> <span class="o">=</span>
  <span class="n">tr</span> <span class="p">[]</span>
    <span class="p">[</span> <span class="n">td</span> <span class="p">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="n">fromInt</span> <span class="n">group</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="p">]</span>
    <span class="o">,</span> <span class="n">td</span> <span class="p">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="n">group</span><span class="o">.</span><span class="n">name</span> <span class="p">]</span>
    <span class="o">,</span> <span class="n">td</span> <span class="p">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="n">group</span><span class="o">.</span><span class="n">gitUrl</span> <span class="p">]</span>
    <span class="o">,</span> <span class="n">td</span> <span class="p">[]</span> <span class="p">(</span><span class="kt">List</span><span class="o">.</span><span class="n">map</span> <span class="p">(</span><span class="o">\</span><span class="n">ucid</span> <span class="o">-&gt;</span> <span class="n">div</span> <span class="p">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="n">ucid</span> <span class="p">])</span> <span class="n">group</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
    <span class="o">,</span> <span class="n">td</span> <span class="p">[]</span> <span class="p">[</span> <span class="n">rowControls</span> <span class="n">group</span> <span class="p">]</span>
    <span class="p">]</span>

<span class="n">groupTable</span> <span class="p">:</span> <span class="kt">List</span> <span class="kt">Group</span> <span class="o">-&gt;</span> <span class="kt">Html</span> <span class="kt">Msg</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">groupTable</span> <span class="n">groups</span> <span class="o">=</span>
  <span class="n">table</span> <span class="p">[</span><span class="n">class</span> <span class="s">&#34;</span><span class="s2">table&#34;</span><span class="o">,</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">is-hoverable&#34;</span><span class="o">,</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">is-fullwidth&#34;</span><span class="p">]</span>
    <span class="p">[</span> <span class="n">thead</span> <span class="p">[]</span>
      <span class="p">[</span> <span class="n">tr</span> <span class="p">[]</span>
        <span class="p">[</span> <span class="n">th</span> <span class="p">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="s">&#34;</span><span class="s2">ID&#34;</span> <span class="p">]</span>
        <span class="o">,</span> <span class="n">th</span> <span class="p">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="s">&#34;</span><span class="s2">Name&#34;</span> <span class="p">]</span>
        <span class="o">,</span> <span class="n">th</span> <span class="p">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="s">&#34;</span><span class="s2">Git URL&#34;</span> <span class="p">]</span>
        <span class="o">,</span> <span class="n">th</span> <span class="p">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="s">&#34;</span><span class="s2">Members&#34;</span> <span class="p">]</span>
        <span class="o">,</span> <span class="n">th</span> <span class="p">[]</span> <span class="p">[</span> <span class="n">text</span> <span class="s">&#34;</span><span class="s2">Actions&#34;</span> <span class="p">]</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="o">,</span> <span class="n">tbody</span> <span class="p">[]</span> <span class="p">(</span><span class="kt">List</span><span class="o">.</span><span class="n">map</span> <span class="n">rowItem</span> <span class="n">groups</span><span class="p">)</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="p">]</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>these are the edit/delete buttons at the end of a row</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>this is the actual row</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>this is the table with headers and all the rows attached</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>rows are attached here</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>One of the things that initially confused me about Elm was understanding how
everything is tied together. The application defines a <code>main</code> function, of
which there are different patterns depending on what you’re application needs to
be able to do. The most basic that could meet my needs was <code>Browser.element</code>.
The <code>main</code> function brokers the transfer of messages and model updates between
components (functions registered in a record when your main function is
declared). The data transferred between these functions looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="mvu.svg" alt="mvu" width="406" height="225"/>
</div>
</div>
<div class="paragraph">
<p>As you can see, <code>init</code> simply gives the initial state of the model, as well as
any command (<code>Cmd Msg</code>) you want to run at startup. In our case we run both the
<code>getUsers</code> and <code>getGroups</code> commands (which are themselves simply functions that
return messages):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="elm"><span class="n">init</span> <span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="kt">Model</span><span class="o">,</span> <span class="kt">Cmd</span> <span class="kt">Msg</span><span class="p">)</span>
<span class="n">init</span> <span class="n">_</span> <span class="o">=</span>
  <span class="p">({</span> <span class="n">groups</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="o">,</span> <span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="o">,</span> <span class="n">editModal</span> <span class="o">=</span> <span class="kt">Inactive</span>
  <span class="o">,</span> <span class="n">notification</span> <span class="o">=</span> <span class="s">&#34;</span><span class="s2">&#34;</span>
  <span class="p">}</span><span class="o">,</span> <span class="n">batch</span> <span class="p">[</span><span class="n">getUsers</span><span class="o">,</span> <span class="n">getGroups</span><span class="p">])</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Platform.command.batch simply runs multiple commands in parallel</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Messages are passed (along with the model) to <code>update</code> as they come in and
<code>update</code> returns and updated model as well as any commands that need to be run.
<code>update</code> is the only way your application <em>moves through</em> state changes and as
such <code>update</code> really seems to define <em>exactly</em> what your web app <em>does</em>. For me
at least, it took some mental gymnastics to figure out exactly how I wanted to
do things. For example updating a group, which I would typically conceptualize
as a single action, really involved at least three messages:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="message.svg" alt="message" width="575" height="335"/>
</div>
</div>
<div class="paragraph">
<p>Messages can carry data or even other messages (yo dawg) and not only do they
create an airtight concurrency system, their strict typing also ensures that
your app never reaches an unanticipated state. All messages need to have a case
in <code>update</code>. What happens if I forget to implement a branch for <code>ReloadGroups</code>?
It won’t compile. What happens if <code>ReloadGroups</code> gets a result it didn’t
expect? Can’t happen, all possibilities for the type must be handled or it
won’t compile. Notice a trend?</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_bad"><a class="anchor" href="#_the_bad"></a><a class="link" href="#_the_bad">The Bad</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Great! So we have a front end system where we can’t possibly shoot ourselves in
the foot, right? Wrong. Fear not my dear reader, in my infinite wisdom I still
managed to screw up a lot of things.</p>
</div>
<div class="paragraph">
<p>The first bit of advice that I didn’t take until after I adopted experience and
pain as a teacher is this: don’t stub out your code. This isn’t your
<a href="https://gfycat.com/boringadoredgreatdane">typical JavaScript dev experience</a>,
where you stop every 90 seconds to make sure you didn’t mess something up. If
you’re going to implement something, <em>do it</em>. Don’t make a little pass through
branch in <code>update</code> that returns an unchanged model, it’ll only bite you in the
butt later when you’re wondering why your app compiles but doesn’t have that
particular bit of functionality.</p>
</div>
<div class="paragraph">
<p>Don’t trust the compiler to figure out how to organize arguments. This is
functional programming and you’re going to be building functions of functions
of functions of functions…​ Elm has a nice syntax that doesn’t require the
<a href="https://en.wikipedia.org/wiki/Lisp_(programming_language)">Long Irritating Strings
of Parenthesis</a> that you may be used to (or even love).  You can and will still
use them to help the compiler make sense of what you mean. A quick REPL session
will demonstrate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">ryan@wsl2:/home/ryan$</span><span class="w"> </span>elm repl
<span class="go">---- Elm 0.19.1 ----------------------------------------------------------------
</span><span class="gp">Say :help for help and :exit to exit! More at &lt;https://elm-lang.org/0.19.1/repl&gt;</span><span class="w">
</span><span class="go">--------------------------------------------------------------------------------
</span><span class="gp">&gt;</span><span class="w"> </span>import String
<span class="gp">&gt;</span><span class="w"> </span>import Html
<span class="gp">&gt;</span><span class="w"> </span>Html.div <span class="o">[]</span> <span class="o">[</span> Html.text String.fromInt 42 <span class="o">]</span>
<span class="go">-- TYPE MISMATCH ---------------------------------------------------------- REPL

The 1st argument to `text` is not what I expect:

5|   Html.div [] [ Html.text String.fromInt 42 ]
                             ^^^^^^^^^^^^^^
This `fromInt` value is a:

</span><span class="gp">    Int -&gt;</span><span class="w"> </span>String.String
<span class="go">
But `text` needs the 1st argument to be:

    String.String

-- TOO MANY ARGS ---------------------------------------------------------- REPL

The `text` function expects 1 argument, but it got 2 instead.

5|   Html.div [] [ Html.text String.fromInt 42 ]
                   ^^^^^^^^^
Are there any missing commas? Or missing parentheses?

</span><span class="gp">&gt;</span><span class="w"> </span>Html.div <span class="o">[]</span> <span class="o">[</span> Html.text <span class="o">(</span>String.fromInt 42<span class="o">)</span> <span class="o">]</span>
<span class="gp">&lt;internals&gt;</span><span class="w"> </span>: Html.Html msg</code></pre>
</div>
</div>
<div class="paragraph">
<p>So while the compiler is smart, it isn’t <em>that</em> smart. Which frankly is good,
because I’ve had my fill of things that are <em>smart</em> or
<a href="https://www.simonewebdesign.it/ruby-is-magic/"><em>magical</em></a>. Be explicit when
needed and don’t fear the parenthesis.</p>
</div>
<div class="paragraph">
<p>While we’re talking about the syntax, let’s</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="elm"><span class="p">[</span> <span class="n">talk</span>
<span class="o">,</span> <span class="n">about</span>
<span class="o">,</span> <span class="n">the</span>
<span class="o">,</span> <span class="n">syntax</span>
<span class="p">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>I’m not going to lie, if you’re not used to it and you’re coming from a Rust
back end (as I was) it’s a lot like putting your brain into a wood chipper. The
best advice I can give you is this: try your best, the compiler is pretty good
and making sense of crappy indentation. When it can’t figure it out it will tell
you and even give you a code sample. The more examples you read the more natural
it becomes, but at first it’s unnerving.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_elmy"><a class="anchor" href="#_the_elmy"></a><a class="link" href="#_the_elmy">The Elmy</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are a few things that just seemed to <em>happen</em> to me as I was writing code
in Elm. First and foremost, I would write my way into a situation that I didn’t
think should even be possible. For example when I was developing the modal
dialog that allows the user to edit/update a group I found myself guarding
against all sorts of possibilities that the data isn’t what it should be. That
was mostly because the data doesn’t matter (or make sense) if the dialog isn’t
active. With Elm, it turned out to be easier to store the modal data in a
custom type that either is active with valid data or isn’t active. Take a look:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="elm"><span class="k">type</span> <span class="kt">EditModal</span>
  <span class="o">=</span> <span class="kt">Active</span>
  <span class="p">{</span> <span class="n">group</span> <span class="p">:</span> <span class="kt">Group</span>
  <span class="o">,</span> <span class="n">searchText</span> <span class="p">:</span> <span class="kt">String</span>
  <span class="o">,</span> <span class="n">buttonText</span> <span class="p">:</span> <span class="kt">String</span>
  <span class="o">,</span> <span class="n">title</span> <span class="p">:</span> <span class="kt">String</span>
  <span class="o">,</span> <span class="n">onClick</span> <span class="p">:</span> <span class="kt">Group</span> <span class="o">-&gt;</span> <span class="kt">Msg</span>
  <span class="p">}</span>
  <span class="o">|</span> <span class="kt">Inactive</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This way the compile makes sure I don’t have to constantly double-check.</p>
</div>
<div class="paragraph">
<p>I also ended up needing a custom autocompletion component that turned out to be
pretty trivial to implement. Here’s the problem: I may have hundreds of students
in a semester and they are all identified by their UCID. How do I select one
UCID from the hundreds when I don’t have them memorized? The best solution I
could come up with was to create a drop down that displayed up to five students
that partially matched what I had typed into a search box. In Elm I was already
capturing every keystroke in that box to update the model all I had to do was
filter a list of possibilities and display them when there were five or less
possibilities. It was way easier than I expected it to be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="elm"><span class="c1">-- provides HTML for a link within a dropdown menu</span>
<span class="n">dropLink</span> <span class="p">:</span> <span class="kt">User</span>  <span class="o">-&gt;</span> <span class="kt">Html</span> <span class="kt">Msg</span>
<span class="n">dropLink</span> <span class="n">user</span> <span class="o">=</span>
  <span class="n">a</span> <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">dropdown-item&#34;</span><span class="o">,</span> <span class="n">onClick</span> <span class="p">(</span><span class="kt">AddMember</span> <span class="n">user</span><span class="o">.</span><span class="n">ucid</span><span class="p">)</span> <span class="p">]</span>
    <span class="p">[</span> <span class="n">text</span> <span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">google_name</span> <span class="o">++</span> <span class="s">&#34;</span><span class="s2"> (&#34;</span> <span class="o">++</span> <span class="n">user</span><span class="o">.</span><span class="n">ucid</span> <span class="o">++</span> <span class="s">&#34;</span><span class="s2">)&#34;</span><span class="p">)</span> <span class="p">]</span>

<span class="c1">-- determines if a User should be displayed in the dropdown list</span>
<span class="n">matchUser</span> <span class="p">:</span> <span class="kt">User</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="o">-&gt;</span> <span class="kt">Bool</span>
<span class="n">matchUser</span> <span class="n">user</span> <span class="n">searchText</span> <span class="o">=</span>
  <span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="n">contains</span> <span class="n">searchText</span> <span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="n">toLower</span> <span class="n">user</span><span class="o">.</span><span class="n">ucid</span><span class="p">))</span>
  <span class="o">||</span> <span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="n">contains</span> <span class="n">searchText</span> <span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="n">toLower</span> <span class="n">user</span><span class="o">.</span><span class="n">google_name</span><span class="p">))</span>

<span class="c1">-- filters a User list down to which ones should be shown</span>
<span class="n">filterUsers</span> <span class="p">:</span> <span class="kt">List</span> <span class="kt">User</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="o">-&gt;</span> <span class="kt">List</span> <span class="kt">User</span>
<span class="n">filterUsers</span> <span class="n">users</span> <span class="n">searchText</span> <span class="o">=</span>
  <span class="kt">List</span><span class="o">.</span><span class="n">filter</span> <span class="p">(</span><span class="o">\</span><span class="n">u</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">matchUser</span> <span class="n">u</span> <span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="n">toLower</span> <span class="n">searchText</span><span class="p">)))</span> <span class="n">users</span>

<span class="c1">-- provides HTML for a live-updating, searchable dropdown selector of users</span>
<span class="n">autoDrop</span> <span class="p">:</span> <span class="kt">List</span> <span class="kt">User</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="o">-&gt;</span> <span class="kt">Html</span> <span class="kt">Msg</span>
<span class="n">autoDrop</span> <span class="n">users</span> <span class="n">searchText</span> <span class="o">=</span>
  <span class="k">let</span>
    <span class="n">showUsers</span> <span class="o">=</span>
      <span class="n">filterUsers</span> <span class="p">(</span><span class="n">log</span> <span class="s">&#34;</span><span class="s2">autoDrop: users&#34;</span> <span class="n">users</span><span class="p">)</span> <span class="p">(</span><span class="n">log</span> <span class="s">&#34;</span><span class="s2">autoDrop: searchText&#34;</span> <span class="n">searchText</span><span class="p">)</span>
    <span class="n">active</span> <span class="o">=</span>
      <span class="p">(</span><span class="kt">List</span><span class="o">.</span><span class="n">length</span> <span class="n">showUsers</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">)</span>
  <span class="k">in</span>
    <span class="n">div</span> <span class="p">[</span> <span class="n">classList</span> <span class="p">[</span> <span class="p">(</span><span class="s">&#34;</span><span class="s2">dropdown&#34;</span><span class="o">,</span> <span class="kt">True</span><span class="p">)</span><span class="o">,</span> <span class="p">(</span><span class="s">&#34;</span><span class="s2">is-active&#34;</span><span class="o">,</span> <span class="n">active</span><span class="p">)</span> <span class="p">]</span> <span class="p">]</span>
      <span class="p">[</span> <span class="n">div</span> <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">dropdown-trigger&#34;</span> <span class="p">]</span>
        <span class="p">[</span> <span class="n">div</span> <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">field&#34;</span> <span class="p">]</span>
          <span class="p">[</span> <span class="n">p</span> <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">control&#34;</span><span class="o">,</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">is-expanded&#34;</span><span class="o">,</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">has-icons-right&#34;</span> <span class="p">]</span>
            <span class="p">[</span> <span class="n">input</span>
              <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">input&#34;</span>
              <span class="o">,</span> <span class="n">type_</span> <span class="s">&#34;</span><span class="s2">search&#34;</span>
              <span class="o">,</span> <span class="n">placeholder</span> <span class="s">&#34;</span><span class="s2">Search...&#34;</span>
              <span class="o">,</span> <span class="n">value</span> <span class="n">searchText</span>
              <span class="o">,</span> <span class="n">onInput</span> <span class="kt">SearchInput</span>
              <span class="p">]</span>
              <span class="p">[]</span>
            <span class="o">,</span> <span class="n">span</span> <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">icon&#34;</span><span class="o">,</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">is-small&#34;</span><span class="o">,</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">is-right&#34;</span><span class="p">]</span>
              <span class="p">[</span> <span class="n">i</span> <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">fas&#34;</span><span class="o">,</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">fa-search&#34;</span> <span class="p">]</span> <span class="p">[]]</span>
            <span class="p">]</span>
          <span class="p">]</span>
        <span class="p">]</span>
      <span class="o">,</span> <span class="n">div</span> <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">dropdown-menu&#34;</span> <span class="p">]</span>
        <span class="p">[</span> <span class="n">div</span> <span class="p">[</span> <span class="n">class</span> <span class="s">&#34;</span><span class="s2">dropdown-content&#34;</span> <span class="p">]</span>
          <span class="p">(</span><span class="kt">List</span><span class="o">.</span><span class="n">map</span> <span class="n">dropLink</span> <span class="n">showUsers</span><span class="p">)</span>
        <span class="p">]</span>
      <span class="p">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To wrap up, if you haven’t given Elm a shot, I highly recommend it. It
forces/allows you to keep your mind on the problem you are solving. Its
pedantry is a welcome counterpoint to the
<a href="https://thenewstack.io/brendan-eich-on-creating-javascript-in-10-days-and-what-hed-do-differently-today/">
everything is mutable swamp that is JavaScript</a>. Apologies to Mr. Eich.</p>
</div>
</div>
</div>

      </div>

      <footer>
        


        
      </footer>
    </article>

    
    
    <link rel="stylesheet" href="https://using.tech/css/syntax.css">
<link rel="stylesheet" href="https://using.tech/css/asciidoc.css">
    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
      <p><a href='mailto:ryan@using.tech'>Email</a></p>
    
     © 2025
    
       · 
      Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
